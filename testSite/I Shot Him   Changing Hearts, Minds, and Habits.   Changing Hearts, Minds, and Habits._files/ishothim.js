$(document).ready(function(){var base=$('#blogURL').attr('href'),$mainContent=$("#ajax-container"),$innerContainer=$('#content'),$searchInput=$("#s"),$allLinks=$("a"),$historySupported=false,$currentFeature=1,$mouseOver=false,$finishedLoading=false,$containerHeight=$("#ajax-container").height(),$currentWidth='',$newWidth='',$isMobile=false,$mergerNote=false,$el;function isiPad(){if(navigator.userAgent.match(/iPad/i)!=null){$('html').addClass('is-iPad');}}
if(navigator.userAgent.match(/(iPhone|iPod|Android|BlackBerry)/)){$isMobile=true;$('html').addClass('mobile-device');}else{$isMobile=false;$('html').addClass('not-mobile-device');};function debug(text){if((typeof(Debug)!=='undefined')&&Debug.writeln){Debug.writeln(text);}
if(window.console&&window.console.log){window.console.log(text);}
if(window.opera){window.opera.postError(text);}
if(window.debugService){window.debugService.trace(text);}}
function mergerMania(){if(jQuery.support.ajax){if($mergerNote==false){$('body').addClass('activeMerger');$('.activeMerger #hidden-merger-container').fadeIn();$('#merger-background-blocker').unbind('click');$('#merger-background-blocker').click(function(){$('.activeMerger #hidden-merger-container').fadeOut();$('body').removeClass('activeMerger');$mergerNote=true;});}}else{if($('body').hasClass('home')){$('body').addClass('activeMerger');$('.activeMerger #hidden-merger-container').fadeIn();$mergerNote=true;}}}
$(document).keyup(function(e){if(e.keyCode==27){$('.activeMerger #hidden-merger-container').fadeOut();$('body').removeClass('activeMerger');$mergerNote=true;}});function isSupportedBrowserHistory(){return!!(window.history&&history.pushState);}
function popStateHandler(event){if(event.state!=null){(event.preventDefault)?event.preventDefault():event.returnValue=false;ajaxLoadContent(event.state);}}
function init(){$finishedLoading=true;isiPad();bindLayzy();updateBindFunctions();dribbbs();$('.ish-img').fancybox();$("ul li:last-child").addClass("last-item");$("#project-overview h2:first-child").addClass("first-item");$historySupported=isSupportedBrowserHistory();if($historySupported){var current=location.protocol+'//'+ location.hostname+ location.pathname;if(base+'/'!=current){var diff=current.replace(base,'');history.replaceState(diff,base+ diff,diff);}else{history.replaceState(' ',base,'');}
window.onpopstate=popStateHandler;}else{}}
function updateBindFunctions(){fullScreenSlide();bindHoverFx();bindScroll();mediaQueryCalculator();mergerMania();setTimeout(function(){if($('html').hasClass('lazy-loading')){$heroUrl='url('+ $('img.lazy-source').attr('src')+')';$('.layzy').css('background',$heroUrl);$('.layzy').addClass('fadeIn');$('html').removeClass('lazy-loading');$('html').addClass('lazy-loaded');}},1000);homeLabelFix();$("#project-images").fitVids();jQuery.get('/wp-content/plugins/contact-form-7/includes/js/scripts.js',function(data){eval(data);});}
function homeLabelFix(){setTimeout(function(){if($('body').hasClass('home')){var pOffset=($('#what-we-do-1').position().top)-($("#what-we-do-inner").position().top)+($('#what-we-do-inner').scrollTop());$('#what-we-do-inner').stop(true,false).animate({scrollTop:(pOffset)},300);}},1000);}
function bindLayzy(){$('img.lazy-source').unbind("load");$('img.lazy-source').bind("load",function(){$heroUrl='url('+ $(this).attr('src')+')';$('.layzy').css('background',$heroUrl);$('.layzy').addClass('fadeIn');$('html').removeClass('lazy-loading');$('html').addClass('lazy-loaded');})}
function ajaxLoadContent(path){$finishedLoading=false;$containerHeight=$mainContent.height();$mainContent.css('height',$containerHeight);$.ajax({type:"GET",url:base+ path,dataType:"html",success:function(out){$innerContainer.fadeOut(300,function(){$mainContent.empty();$('#absolute-to-fixed-bar').css('display','none');var result=$(out);var pageContent=$(out).find("#content");$('html, body').animate({scrollTop:0},0);$('html').addClass('lazy-loading');$('html').removeClass('lazy-loaded');$mainContent.append(pageContent.fadeIn(300,function(){controlHeight();$finishedLoading=true;$(window).unbind('scroll');updateBindFunctions();$mainContent.css('height','auto');dribbbs();fixPlaceholders();}));$("#project-overview h2:first-child").addClass("first-item");updateBindFunctions();$innerContainer=pageContent;document.title=$innerContainer.data('title');var classList=$innerContainer.attr('class').split(/\s+/);$('body').removeClass();$.each(classList,function(index,item){$('body').addClass(item);});});}});}
$('a:urlInternal').live('click',function(event){if($historySupported){$el=$(this);if((!$el.hasClass("comment-reply-link"))&&($el.attr("id")!='cancel-comment-reply-link')&&(!$el.hasClass('ab-item'))&&(!$el.hasClass('post-edit-link'))&&(!$el.hasClass('ish-img'))&&(!$el.hasClass('no-ajax')))
{(event.preventDefault)?event.preventDefault():event.returnValue=false;var path=$el.attr('href').replace(base,'');history.pushState(path,base+ path,path);ajaxLoadContent(path);$(".current_page_item").removeClass("current_page_item");$allLinks.removeClass("current_link");$el.addClass("current_link").parent().addClass("current_page_item");_gaq.push(['_trackPageview']);return;}}});$('#searchform').submit(function(event){if($historySupported){(event.preventDefault)?event.preventDefault():event.returnValue=false;var s=$searchInput.val();if(s){var path='/?s='+ s;history.pushState(path,base+ path,path);ajaxLoadContent(path);$(".current_page_item").removeClass("current_page_item");$allLinks.removeClass("current_link");}
return false;}});$(window).resize(function(){updateBindFunctions();mediaQueryCalculator();});function mediaQueryCalculator(){var width=$(window).width();if(width>=0&&width<=479){$newWidth='width-0-479';}else if(width>=480&&width<=767){$newWidth='width-480-767';}else if(width>=768&&width<=1023){$newWidth='width-768-1024';}else if(width>=1024&&width<=1199){$newWidth='width-1024-1199';}else if(width>=1200){$newWidth='width-1200';}
$('body').removeClass($currentWidth).addClass($newWidth);$currentWidth=$newWidth;}
function fullScreenSlide(){var browserheight=$(window).height();var browserWidth=$(window).width();$('#home-page-hero').height(browserheight);$('#home-page-hero').css('width',browserWidth);$('#about-page-hero').height(browserheight);$('#about-page-hero').css('width',browserWidth);$('#single-page-hero').height(browserheight);$('#single-page-hero').css('width',browserWidth);setTimeout(function(){$('.control-height').removeClass('control-height');$('#ajax-container').attr('style','');},500);}
function controlHeight(){$('html, body, #ajax-container, #content').addClass('control-height');}
function bindHoverFx(){$('.not-mobile-device .recent-work-sample').unbind('hover');$('.not-mobile-device .recent-work-sample').hover(function(){$(this).addClass('show-recent-info');},function(){$(this).removeClass('show-recent-info');});$('.crew-member').unbind('hover');$('.crew-member').hover(function(){$(this).addClass('show-crew-info');},function(){$(this).removeClass('show-crew-info');});$('.not-mobile-device #access').unbind('hover');$('.not-mobile-device #access').hover(function(){$(this).addClass('menu-open');},function(){$(this).removeClass('menu-open');});$('.mobile-device #access').unbind('click');$('.mobile-device #access').click(function(){$(this).toggleClass('menu-open');});$('#facebook-share').unbind('click');$('#facebook-share').click(function(){var $linkTitle=$(this).attr('title');_gaq.push(['_trackEvent','Icons','Facebook share clicked',$linkTitle]);});$('#twitter-share').unbind('click');$('#twitter-share').click(function(){var $linkTitle=$(this).attr('title');_gaq.push(['_trackEvent','Icons','Twitter share clicked',$linkTitle]);});$('#pinterest-share').unbind('click');$('#pinterest-share').click(function(){var $linkTitle=$(this).attr('title');_gaq.push(['_trackEvent','Icons','Pinterest share clicked',$linkTitle]);});$('#page-down-arrow').unbind('click');$('#page-down-arrow').click(function(){$('html, body').animate({scrollTop:($('#down-arrow-icon').offset().top+ 23)},500);});$('.mission-icons').unbind('hover');$('.mission-icons').hover(function(){$(this).addClass('being-hovered');},function(){$(this).removeClass('being-hovered');});$('.mission-icons').unbind('click');$('.mission-icons').click(function(){var index=$(this).index();var top=index*$('.mission-text-container').height();var $textId='#'+ $(this).data('location');var pOffset=($($textId).position().top)-($("#mission-text-inner").position().top)+($('#mission-text-inner').scrollTop());$('#mission-text-container').animate({scrollTop:(pOffset)},300);$('.mission-icons').removeClass('active-section');$(this).addClass('active-section');});$('.what-we-do-label').unbind('hover');$('.what-we-do-label').hover(function(){if($(this).hasClass('first-label')){}else{var $labelNum=$(this).data('number');var $labelName='label'+ $labelNum+'';$('#what-we-do-labels').removeClass();$('#what-we-do-labels').addClass($labelName);var $labelId='#what-we-do-'+ $labelNum+'';var pOffset=($($labelId).position().top)-($("#what-we-do-inner").position().top)+($('#what-we-do-inner').scrollTop());$('#what-we-do-inner').stop(true,false).animate({scrollTop:(pOffset)},300);$('.active-label').removeClass('active-label');$(this).addClass('active-label');}},function(){var $labelNum=1;var $labelName='label'+ $labelNum+'';$('#what-we-do-labels').removeClass();$('#what-we-do-labels').addClass($labelName);var $labelId='#what-we-do-'+ $labelNum+'';var pOffset=($($labelId).position().top)-($("#what-we-do-inner").position().top)+($('#what-we-do-inner').scrollTop());$('#what-we-do-inner').stop(true,false).animate({scrollTop:(pOffset)},300);$('.active-label').removeClass('active-label');$('.what-we-do-label.first-label').addClass('active-label');});$('#more-drawer-link').unbind('click');$('#more-drawer-link').click(function(){$("#more-projects-inner").slideToggle("slow");_gaq.push(['_trackEvent','UI event','more-projects','more-projects drawer clicked']);});$('#our-motto-container').unbind('hover');$('#our-motto-container').hover(function(){$(this).addClass('hovered-text');$('#motto-title-text').html('Your Motto');},function(){$(this).removeClass('hovered-text');$('#motto-title-text').html('Our Motto');});$('.joke-text-container').unbind('hover');$('.joke-text-container').hover(function(){$(this).addClass('hovered-text');},function(){$(this).removeClass('hovered-text');});$('#ie-is-poopy a').click(function(){ieTurdStorm();});$('#poo-wall').unbind('click');$('#poo-wall').click(function(){if($('body').hasClass('ie-turd-storm')){ieTurdStorm();}});$('#ie-background').click(function(){$(this).fadeOut();$('#ie-warning').fadeOut();});$('#ie-warning').click(function(){$(this).fadeOut();$('#ie-background').fadeOut();});}
function fixPlaceholders(){$('input.wpcf7-text').each(function(){if(!$(this).val()){$(this).val($(this).attr('title'));}
if($(this).val()==$(this).data('originalValue')){$(this).val('');}});$('input.wpcf7-text, textarea ').focus(function(){if(!$(this).data('originalValue')){$(this).data('originalValue',$(this).val());}
if($(this).val()==$(this).data('originalValue')){$(this).val('');}}).blur(function(){if($(this).val()==''){$(this).val($(this).data('originalValue'));}});$('#mc_mv_EMAIL').val('Email Address');$('#mc_mv_EMAIL').focus(function(){if(!$(this).data('originalValue')){$(this).data('originalValue',$(this).val());}
if($(this).val()==$(this).data('originalValue')){$(this).val('');}}).blur(function(){if($(this).val()==''){$(this).val($(this).data('originalValue'));}});}
function bindScroll(){var distance=0,blur=0,maxShadow=10,yOffset=0,$bar=$('#absolute-to-fixed-bar'),$div=$('#scroll-top-detector'),$sideBar=$('.single #fixed-detector'),$shareCont=$('#share-contents'),$body=$('#ajax-container, #header-container'),userAgent=navigator.userAgent,sTop=$(window).scrollTop();if($finishedLoading===true){if($div.offset().top<=sTop){$body.addClass('fixed-at-top');}else{$body.removeClass('fixed-at-top');}
$bar.css('display','block');if($('body').hasClass('single')){if($('body').hasClass('width-480-767')){}else if($('body').hasClass('width-0-479')){}else{if($sideBar.offset().top<=sTop+ 72){var $shareMargin=(sTop- $sideBar.offset().top)+ 40;$shareCont.css('padding-top',$shareMargin);}else{$shareCont.css('padding-top','');}}}
$(window).unbind('scroll');$(window).bind('scroll',function(e){sTop=$(window).scrollTop();if(sTop>50){$('html').addClass('scrolled-a-bit');}else{$('html').removeClass('scrolled-a-bit');}
if($div.offset().top<=sTop){$body.addClass('fixed-at-top');}else{$body.removeClass('fixed-at-top');}
var distance=sTop- $div.offset().top;if($('html').hasClass('mobile-device')){}
else{if(distance<=0){blur=0;}else if((distance>0)&&(distance<=80)){blur=distance*.125;}else{blur=maxShadow;}
$('#absolute-to-fixed-bar').animate({boxShadow:'0 0 '+blur+'px 0 #888'},1);}
if($('body').hasClass('single')){if($('body').hasClass('width-480-767')){}else if($('body').hasClass('width-0-479')){}else{$scrollTop=$(window).scrollTop();if($sideBar.length){if($sideBar.offset().top!=null){if($sideBar.offset().top<=$scrollTop+ 72){var $shareMargin=(sTop- $sideBar.offset().top)+ 40;$shareCont.css('padding-top',$shareMargin);}else{$shareCont.css('padding-top','');}}}}}});}}
$(document).keyup(function(event){if(event.keyCode==27){if($('body').hasClass('ie-turd-storm')){ieTurdStorm();}}});function ieTurdStorm(){$('body').toggleClass('ie-turd-storm');$('#butt-inner').stop().attr('style','');$('#poo-box').stop().attr('style','');$('#poo-wall').stop().attr('style','');$('#turd-message-container').stop().css('display','none');if($('body').hasClass('ie-turd-storm')){_gaq.push(['_trackEvent','Icons','IE shit button clicked','Internet Explorer is shitty']);$('#butt-inner').animate({top:'0%'},800,'swing',function(){$('#butt-inner').animate({top:'-3%'},300,'swing',function(){$('#butt-inner').animate({top:'0%'},600,'swing');});$('#poo-box').animate({bottom:'-400%'},8000,'linear');});setTimeout(function(){$('#poo-wall').css('bottom','0%');},2500);setTimeout(function(){$('#turd-message-container').fadeIn();},5500);}}
function dribbbs(){$.ajax({type:"GET",dataType:"jsonp",cache:false,url:"http://api.dribbble.com/players/thewellarmed/shots",success:function(data){var $dribTitle=data.shots[0].title+' @dribbble:';var $dribUrl=data.shots[0].short_url;$("#dribbble-content").fadeOut(function(){$('#dribbble-content').html($dribTitle).fadeIn();});$("a#dribbble-url").fadeOut(function(){$('a#dribbble-url').attr('href',$dribUrl).attr('title',$dribTitle).html($dribUrl).fadeIn();});}});}
init();});